---
import Layout from '@layouts/Layout.astro';
import fetchApi from '@lib/strapi';
import type {ProfileResponse} from '@interfaces/profile';
import type {ArticleResponse} from '@interfaces/article';

const profiles = await fetchApi<ProfileResponse[]>({
	endpoint: 'personnes',
	wrappedByKey: 'data',
});

const articles = await fetchApi<ArticleResponse[]>({
	endpoint: 'articles',
	wrappedByKey: 'data',
});


---

<Layout title="Welcome to Astro.">
  <div class="text-center flex flex-col gap-10">
    <h1>Bienvenue sur l'app de généalogie d'Hébrail</h1>
    <p>Cliquez sur un des liens ci-dessous pour commencer à naviguer</p>
    <div class="flex justify-around">
      <div>
        <h3 class="">Les gens</h3>
				<ul>
				{profiles.map((profile) => (
					<li><a class="hover:underline" href={`/personne/${profile.id}`}>{profile.attributes.Nom}</a></li>
				))}
				</ul>
      </div>
      <div>
        <h3>Les articles</h3>
				<ul>
					{
						articles.map((article) => (
							<li><a class="hover:underline" href={`/article/${article.id}`}>{article.attributes.Titre}</a></li>
						))
					}
				</ul>
      </div>
    </div>
  </div>
</Layout>