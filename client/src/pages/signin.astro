---
import Layout from "@layouts/Layout.astro";

---

<Layout title="Inscription" connected={false}>
  <form
    method="post"
    action="/api/signin"
    class="flex flex-col justify-center grow gap-12 items-center"
  >
    <div class="text-5xl font-serif text-center">S'inscrire</div>
    <div class="w-96 flex flex-col gap-6">
      <input
        class="appearance-none border rounded-xl py-3 px-6 w-full text-gray-700 leading-tight focus:outline-none focus:outline-royal-blue"
        id="name"
        type="text"
        placeholder="Nom"
        name="name"
        required
      />
      <input
        class="appearance-none border rounded-xl py-3 px-6 w-full text-gray-700 leading-tight focus:outline-none focus:outline-royal-blue"
        id="email"
        type="text"
        placeholder="Adresse e-mail"
        name="email"
        required
      />
      <input
        class="appearance-none border rounded-xl py-3 px-6 w-full text-gray-700 leading-tight focus:outline-none focus:outline-royal-blue"
        id="password"
        type="password"
        name="password"
        placeholder="Mot de passe (entre 8 et 72 caractÃ¨res)"
        required
      />
      <input
        class="appearance-none border rounded-xl py-3 px-6 w-full text-gray-700 leading-tight focus:outline-none focus:outline-royal-blue"
        id="passwordConfirm"
        type="password"
        name="passwordConfirm"
        placeholder="Confirmez votre mot de passe"
        required
      />
      <div class="flex items-center justify-center">
        <button
          class="hover:bg-gray-700 focus:bg-gray-700 py-2 px-4 w-full rounded-full focus:outline-none transition"
          type="submit"
        >
          Continuer
        </button>
      </div>
    </div>
  </form>
  <script is:inline>
    function enableButtonIfFilled() {
      const name = document.querySelector("form input#name");
      const email = document.querySelector("form input#email");
      const password = document.querySelector("form input#password");
      const passwordConfirm = document.querySelector("form input#passwordConfirm");
      const button = document.querySelector("form button");
      button.disabled = !email.value || !password.value || !passwordConfirm.value || !name.value || password.value !== passwordConfirm.value || password.value.length < 8 || password.value.length > 72;
    }

    document.querySelector("form").addEventListener("input", enableButtonIfFilled);

    enableButtonIfFilled();
  </script>

  <style>
    button:disabled {
      background-color: #e1ded9;
      color: #a7a39a;
    }
    button {
      background-color: black;
      color: white;
    }
  </style>
</Layout>
